{"version":3,"sources":["services/TableAPI/index.js","utils/Abilities/defineAbility.js","contexts/userContext.js","utils/MockupData/TableColumns.js","contexts/abilityContext.js","components/Table/index.js","contexts/tableShowContext.js","pages/Table/index.js","components/CheckToken/index.js","utils/MockupData/UserRole.js","pages/Login/index.js","pages/index.js","assets/GlobalStyles.js","index.js"],"names":["TableAPI","username","password","axios","url","process","REACT_APP_API_ENDPOINT","method","headers","data","then","response","catch","error","token","require","AbilityBuilder","Ability","UserContext","createContext","user","permission","getPermission","userLogin","UserProvider","children","ability","useState","setUser","setPermission","params","console","log","Cookie","get","prms","zpermission","rules","can","cannot","map","p","i","per_split","split","updateAbility","update","err","alert","Provider","value","accessToken","refreshToken","set","decode","remove","TableColumns","key","label","fixed","width","TableAction","checkPackage","AbilityContext","createContextualCan","Consumer","CompactCell","props","Table","Cell","style","padding","CompactHeaderCell","HeaderCell","backgroundColor","color","TableCustom","tcolumn","tvalue","action","loading","React","compact","bordered","noData","showHeader","autoHeight","hover","column","columnKeys","columns","filter","some","CustomCell","CustomHeaderCell","ActionCell","rowData","dataKey","handleAction","className","package","IconButton","appearance","onClick","icon","Icon","height","cellBordered","headerHeight","rowHeight","affixHorizontalScrollbar","rest","Column","align","TableShowContext","dataTable","getDataTable","TableShowProvider","setDataTable","Cookies","TablePage","userContext","useContext","tableData","useAbility","isVerify","setIsVerify","setColumn","setAction","setLoading","useMemo","useEffect","verify","jwt","REACT_APP_SECRET","oldColumn","new_column","_","c","oldAction","new_Action","setColumnWithPermission","Fragment","marginTop","UserRoles","id","display","LandingPage","index","type","name","Login","CustomStyles","createGlobalStyle","GlobalStyles","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.f3919fec.chunk.js","sourcesContent":["import axios from \"axios\"\n\nexport const TableAPI = {\n\tauthen: ({ username, password }) => {\n\t\treturn axios({\n\t\t\turl: `${process.env.REACT_APP_API_ENDPOINT}/auth/login`,\n\t\t\tmethod: \"POST\",\n\t\t\theaders: {\n\t\t\t\t\"Context-Type\": \"application/json\"\n\t\t\t},\n\t\t\tdata: {\n\t\t\t\tusername,\n\t\t\t\tpassword\n\t\t\t}\n\t\t})\n\t\t.then((response) => {\n\t\t\treturn response.data\n\t\t})\n\t\t.catch((error) => {\n\t\t\tthrow error\n\t\t})\n\t},\n\n\tdoAuthorization: ({ username, password }) => {\n\t\treturn axios({\n\t\t\turl: `${process.env.REACT_APP_API_ENDPOINT}/api/v2/auth/token`,\n\t\t\tmethod: \"POST\",\n\t\t\theaders: {\n\t\t\t\t\"Context-Type\": \"application/json\"\n\t\t\t},\n\t\t\tdata: {\n\t\t\t\tusername,\n\t\t\t\tpassword\n\t\t\t}\n\t\t})\n\t\t.then((response) => {\n\t\t\treturn response.data\n\t\t})\n\t\t.catch((error) => {\n\t\t\tthrow error\n\t\t})\n\t},\n\n\tpostTokenRenew: ({ token }) => {\n\t\treturn axios({\n\t\t\turl: `${process.env.REACT_APP_API_ENDPOINT}/api/v2/auth/token/refresh`,\n\t\t\tmethod: \"POST\",\n\t\t\theaders: {\n\t\t\t\t\"Context-Type\": \"application/json\",\n\t\t\t\t\"Authorization\": \"Bearer \" + token\n\t\t\t}\n\t\t})\n\t\t.then((response) => {\n\t\t\treturn response.data\n\t\t})\n\t\t.catch((error) => {\n\t\t\tthrow error\n\t\t})\n\t},\n\n\tgetPermissions: ({ token }) => {\n\t\treturn axios({\n\t\t\turl: `${process.env.REACT_APP_API_ENDPOINT}/auth/permission`,\n\t\t\tmethod: \"GET\",\n\t\t\theaders: {\n\t\t\t\t\"Context-Type\": \"application/json\",\n\t\t\t\t\"Authorization\": \"Bearer \" + token\n\t\t\t}\n\t\t})\n\t\t.then((response) => {\n\t\t\treturn response.data\n\t\t})\n\t\t.catch((error) => {\n\t\t\tthrow error\n\t\t})\n\t},\n\n\tgetDataTables: ({ token }) => {\n\t\treturn axios({\n\t\t\turl: `${process.env.REACT_APP_API_ENDPOINT}/thing/all`,\n\t\t\tmethod: \"GET\",\n\t\t\theaders: {\n\t\t\t\t\"Context-Type\": \"application/json\",\n\t\t\t\t\"Authorization\": \"Bearer \" + token\n\t\t\t}\n\t\t})\n\t\t.then((response) => {\n\t\t\treturn response.data\n\t\t})\n\t\t.catch((error) => {\n\t\t\tthrow error\n\t\t})\n\t}\n}\n","const { AbilityBuilder, Ability } = require('@casl/ability');\nconst PAGE = 'Table'\n\nexport function updateAbility(permission) {\n\tconst { rules, can, cannot } = new AbilityBuilder(Ability)\n\t// can('update','thing')\n\tpermission.map((p,i) => {\n\t\tconst per_split = p.split(\":\")\n\t\tcan(\n\t\t\tper_split[0],\n\t\t\tper_split[1]\n\t\t)\n\t})\n\treturn rules\n}\n","import React, { useState, createContext } from 'react'\nimport decode from \"jwt-decode\"\nimport Cookie from \"js-cookie\"\nimport { TableAPI } from '../services/TableAPI' // fetchAPI\nimport { updateAbility } from \"../utils/Abilities\"\n\nexport const UserContext = createContext({\n    user: [],\n    permission : [],\n    getPermission: () => {},\n    userLogin : () => {}\n})\n\nexport const UserProvider = ({ children , ability }) => {\n    const [user, setUser] = useState(null)\n    const [permission, setPermission] = useState(null)\n\n    function userLogin({username, password}) {\n        TableAPI.authen({ \n            username: username, \n            password: password\n        })\n        .then(({ accessToken, refreshToken }) => {\n            // console.table({ accessToken, refreshToken })\n            // console.log(\"usernameee \",username)\n            // if(username === \"admin\"){\n            //     const token = \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VybmFtZSI6ImFkbWluIiwiaWF0IjoxNjMyMzg2NDg4LCJleHAiOjE2MzU1ODUyMjQsInJvbGUiOiJvd25lciJ9.Jr5KtFpIayf-5Cc_zAqbbBmFR4W2v85etl7Oq3pqgEM\"\n            //     Cookie.set(\"access_token\",token)\n            //     setUser(decode(token))\n            // }else{\n            Cookie.set(\"access_token\",accessToken)\n            setUser(decode(accessToken))\n            // }\n            getPermission()\n        })\n        .catch((error) => {\n            console.log(\"login error\", error )\n            setUser(null)\n            Cookie.remove(\"access_token\")\n            // setLoading(false)\n        })\n    }\n\n    function getPermission(params) {\n        console.log(\"getPermission\")\n        if(Cookie.get(\"access_token\")){\n            const owner = [\n                \"read:thing\",\n                \"update:thing\",\n                \"read:uid\",\n                \"read:alarm\",\n                \"read:cctv\",\n                \"update:alarm\"\n            ]\n            const admin = [\n                \"read:thing\",\n                \"update:thing\",\n                \"read:alarm\",\n                \"update:alarm\"\n            ]\n    \n            TableAPI.getPermissions({ \n                token: Cookie.get(\"access_token\")\n            })\n            .then((prms) => {\n                // let ability = defineAbilitiesOnTableFor(user)\n                setPermission(prms)\n                const zpermission = updateAbility(prms)\n                ability.update(zpermission)\n            })\n            .catch((err) => {\n                alert(\"Get permission is went wrong. Plese try again.\")\n            })\n        }else{\n            alert(\"Please login\")\n        }\n    }\n\n    return (\n        <UserContext.Provider value={{\n            user,\n            permission,\n            getPermission,\n            userLogin\n        }}>\n            {children}\n        </UserContext.Provider>\n    )\n}\n","export const TableColumns = [\n\t{\n\t\tkey : \"name\",\n\t\tlabel : \"Name\",\n\t\tpermission : \"read:thing\",\n\t\tfixed: true,\n\t\twidth: 70\n\t},\n\t{\n\t\tkey : \"uid\",\n\t\tlabel : \"UID\",\n\t\tpermission : \"read:uid\",\n\t\tfixed: true,\n\t\twidth: 70\n\t},\n\t{\n\t\tkey : \"cctv\",\n\t\tlabel : \"CCTV\",\n\t\tpermission : \"read:cctv\",\n\t\tfixed: true,\n\t\twidth: 70\n\t},\n\t{\n\t\tkey : \"alarm\",\n\t\tlabel : \"Alarm\",\n\t\tpermission : \"read:alarm\",\n\t\tfixed: true,\n\t\twidth: 70\n\t}\n]\n\nexport const TableAction = [\n\t{\n\t\tkey : \"edit_thing\",\n\t\tlabel : \"Edit Thing\",\n\t\tpermission : \"update:thing\",\n\t\tfixed: true,\n\t\twidth: 70\n\t},\n\t{\n\t\tkey : \"edit_alarm\",\n\t\tlabel : \"Edit  Alarm\",\n\t\tpermission : \"update:alarm\",\n\t\tcheckPackage : true,\n\t\tfixed: true,\n\t\twidth: 70\n\t}\n]","import { createContext } from 'react';\nimport { createContextualCan } from '@casl/react';\n\nexport const AbilityContext = createContext();\nexport const Can = createContextualCan(AbilityContext.Consumer);","import React from 'react';\nimport { \n    Table,\n    IconButton,\n    Icon,\n} from 'rsuite'\nimport 'rsuite-table/dist/css/rsuite-table.css'\nimport './Table.css'\n\nconst CompactCell = props => <Table.Cell {...props} style={{ padding: 4 }} />;\nconst CompactHeaderCell = props => (\n  <Table.HeaderCell {...props} style={{ padding: 4, backgroundColor: '#3498ff', color: '#fff' }} />\n);\n\nfunction TableCustom({tcolumn,tvalue,action,loading}) {\n    const data = tvalue\n    const [compact, setCompact] = React.useState(true);\n    const [bordered, setBordered] = React.useState(true);\n    const [noData, setNoData] = React.useState(false);\n    const [showHeader, setShowHeader] = React.useState(true);\n    const [autoHeight, setAutoHeight] = React.useState(true);\n    const [hover, setHover] = React.useState(true);\n    const [columnKeys, setColumnKeys] = React.useState(tcolumn.map(column => column.key));\n\n    const columns = tcolumn.filter(column => columnKeys.some(key => key === column.key));\n    const CustomCell = compact ? CompactCell : Table.Cell;\n    const CustomHeaderCell = compact ? CompactHeaderCell : Table.HeaderCell;\n\n\n    const ActionCell = ({ rowData, dataKey, ...props }) => {\n        function handleAction() {\n            alert(`Name : ${rowData[dataKey]}`);\n        }\n        return (\n            <Table.Cell {...props} className=\"link-group\">\n                {\n                    !props.checkPackage ?\n                        <IconButton appearance=\"subtle\" onClick={handleAction} icon={<Icon icon=\"pencil\"/>}/>\n                    :\n                    rowData.package === \"advanced\" ?\n                        <IconButton appearance=\"subtle\" onClick={handleAction} icon={<Icon icon=\"pencil\"/>}/>\n                    : \"-\"\n                }\n            </Table.Cell>\n        );\n    }\n\n    return (\n        <div>\n            <Table\n                loading={loading}\n                height={500}\n                hover={hover}\n                showHeader={showHeader}\n                autoHeight={autoHeight}\n                data={noData ? [] : data}\n                bordered={bordered}\n                cellBordered={bordered}\n                headerHeight={compact ? 80 : 90}\n                rowHeight={compact ? 80 : 96}\n                affixHorizontalScrollbar\n                width={\"80vw\"}\n            >\n                {\n                    columns.map(column => {\n                        const { key, label, ...rest } = column;\n                        return (\n                            <Table.Column {...rest} key={key} width={160} align=\"center\">\n                                <CustomHeaderCell>{label}</CustomHeaderCell>\n                                <CustomCell dataKey={key} />\n                            </Table.Column>\n                        );\n                    })\n                }\n                {\n                    action.map(action => {\n                        const { key, label, ...rest } = action;\n                        return (\n                            <Table.Column {...rest} key={key} width={160} align=\"center\">\n                                <CustomHeaderCell>{label}</CustomHeaderCell>\n                                <ActionCell dataKey=\"name\" action/>\n                            </Table.Column>\n                        );\n                    })\n                }\n            </Table> \n        </div>\n    )\n}\nexport default TableCustom","import React, { useState, createContext } from 'react'\nimport { TableAPI } from '../services/TableAPI' // fetchAPI\nimport Cookies from 'js-cookie'\n\nexport const TableShowContext = createContext({\n    dataTable: [],\n    getDataTable : () => {}\n})\n\nexport const TableShowProvider = ({ children , ability }) => {\n    const [dataTable, setDataTable] = useState(null)\n\n    function getDataTable() {\n        TableAPI.getDataTables({ \n            token : Cookies.get(\"access_token\")\n        })\n        .then((response) => {\n            setDataTable(response)\n        })\n        .catch((error) => {\n            alert(\"Get data table is went wrong. Plese try again.\")\n        })\n    }\n\n    return (\n        <TableShowContext.Provider value={{\n            dataTable,\n            getDataTable\n        }}>\n            {children}\n        </TableShowContext.Provider>\n    )\n}\n","import React, { useContext, useMemo, useState } from 'react'\nimport Cookie from \"js-cookie\"\nimport _ from \"lodash\"\nimport { verify } from \"../../components/CheckToken\"\nimport { UserContext } from '../../contexts/userContext'\nimport { useEffect } from 'react/cjs/react.development'\nimport { TableColumns , TableAction } from \"../../utils/MockupData/TableColumns\"\nimport { TableOwner } from \"../../utils/MockupData/TableValues\"\nimport { AbilityContext , Can } from '../../contexts/abilityContext'\nimport { useAbility } from '@casl/react'\nimport { TableAPI } from '../../services/TableAPI' // fetchAPI\nimport Table from \"../../components/Table\"\nimport { TableShowContext } from '../../contexts/tableShowContext'\nimport Cookies from 'js-cookie'\n// import { changeFormat } from '../../utils/Abilities/Permissions'\n\nfunction TablePage() {\n\tconst userContext = useContext(UserContext)\n\tconst tableData = useContext(TableShowContext)\n\tconst ability = useAbility(AbilityContext)\n\tconst token = Cookie.get(\"access_token\")\n\t\n\tconst [isVerify,setIsVerify] = useState(false)\n\tconst [column,setColumn] = useState([])\n\tconst [action,setAction] = useState([])\n\tconst [loading,setLoading] = useState(true)\n\n\tuseMemo(() => {\n\t\tif(Cookies.get(\"access_token\")){\n\t\t\tuserContext.getPermission()\n\t\t}\n\t},[])\n\n    useEffect(() => {\n\t\tsetLoading(true)\n\t\ttableData.getDataTable()\n        setIsVerify(verify(token))\n    },[userContext.user])\n\n\tuseEffect(() => {\n\t\tsetLoading(false)\n\t},[tableData.dataTable])\n\n\tuseEffect(() => {\n\t\tsetColumnWithPermission()\n\t},[userContext.permission])\n\n\tfunction setColumnWithPermission(params) {\n\t\tconst oldColumn = [...TableColumns]\n\t\tconst new_column = _.remove(oldColumn,(c,i) => {\n\t\t\t// return changeFormat(c)\n\t\t\tconst per_split = c.permission.split(\":\")\n\t\t\treturn ability.can(per_split[0],per_split[1])\n\t\t})\n\n\t\tconst oldAction = [...TableAction]\n\t\tconst new_Action = _.remove(oldAction,(c,i) => {\n\t\t\tconst per_split = c.permission.split(\":\")\n\t\t\treturn ability.can(per_split[0],per_split[1])\n\t\t})\n\n\t\tsetAction(new_Action)\n\t\tsetColumn(new_column)\n\t}\n\n\n\n\treturn (\n\t\tisVerify !== false ?\n\t\t<React.Fragment>\n\t\t\t<main className=\"h-100 flex items-center justify-center\">\n\t\t\t\t<div\n\t\t\t\t\tclassName=\"flex flex-column h-100 w-auto mh{8}\"\n\t\t\t\t\tstyle={{\n\t\t\t\t\t\theight: \"calc(100vh - {8}5px - {8}rem)\",\n\t\t\t\t\t\twidth: \"calc(100vw - {8}5px - {8}rem)\",\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t<Table\n\t\t\t\t\t\ttcolumn = {column}\n\t\t\t\t\t\ttvalue = {tableData.dataTable ? tableData.dataTable : []}\n\t\t\t\t\t\taction = {action}\n\t\t\t\t\t\tloading = {loading}\n\t\t\t\t\t/>\n\t\t\t\t\t\n\t\t\t\t\t{/* <Can do=\"create\" on=\"Table\">\n\t\t\t\t\t\t<p> can do <b>Create</b> on table</p>\n\t\t\t\t\t</Can> */}\n\t\t\t\t</div>\n\t\t\t</main>\n\t\t</React.Fragment>\n\t\t: \n\t\t<>\n\t\t\t<div className=\"flex justify-center text-2xl mt-96\" style={{marginTop:\"10rem\"}}>\n\t\t\t\tNot Permission\n\t\t\t</div>\n\t\t</>\n\t)\n}\n\nexport default TablePage\n","import jwt from \"jsonwebtoken\";\nimport Cookie from \"js-cookie\"\n\nexport const verify = (token) => {\n    let verify \n    try {\n        console.log(\"verify try\")\n        verify = jwt.verify(token,process.env.REACT_APP_SECRET)\n    } catch (error) {\n        console.log(\"verify catch\",error)\n        verify = false\n    }\n    return verify\n} ","export const UserRoles = [\n\t{\n\t\tid: 1,\n\t\tusername: 'a',\n\t\tdisplay : \"User A\",\n\t\tpassword: 'P@ssw0rd',\n\t},\n\t{\n\t\tid: 2,\n\t\tusername: 'c',\n\t\tdisplay : \"User C\",\n\t\tpassword: 'P@ssw0rd',\n\t}\n]\n","import React, { useContext } from 'react'\nimport { UserRoles } from '../../utils/MockupData'\nimport {UserContext} from \"../../contexts/userContext\"\n\nfunction LandingPage() {\n    const userContext = useContext(UserContext)\n\n\treturn (\n        <header className=\"header\">\n            <ul className=\"roles\">\n            {\n                UserRoles.map((user, index) => {\n                    return (\n                        <React.Fragment>\n                            <li>\n                                <button\n                                    type=\"button\"\n                                    name={user.username}\n                                    // className={onClickSelectRole(`${user.role}`) ? 'selected' : ''}\n                                    onClick={() => userContext.userLogin({\n                                        username : user.username,\n                                        password : user.password\n                                    })}\n                                >\n                                    {user.display}\n                                </button>\n                            </li>\n                        </React.Fragment>\n                    )\n                })\n            }\n            </ul>\n        </header>\n\t)\n}\n\nexport default LandingPage\n","import Table from \"./Table\"\nimport Login from \"./Login\"\nimport { UserProvider } from \"../contexts/userContext\"\nimport { AbilityContext } from '../contexts/abilityContext'\nimport { Ability } from '@casl/ability'\nimport { TableShowProvider } from \"../contexts/tableShowContext\"\nimport '../assets/css/App.css'\nimport '../assets/css/tailwind.css'\n\nfunction LandingPage(props) {\n    const ability = new Ability\n\treturn (\n\t\t<>\n            <AbilityContext.Provider value={ability}>\n                <UserProvider ability={ability}>\n                    <Login/>\n                    <TableShowProvider>\n                        <Table ability={ability}/>\n                    </TableShowProvider>\n                </UserProvider>\n            </AbilityContext.Provider>\n        </>\n\t)\n}\n\nexport default LandingPage\n","import React from 'react'\nimport { createGlobalStyle } from 'styled-components'\nimport tw, { theme, GlobalStyles as BaseStyles } from 'twin.macro'\n\nconst CustomStyles = createGlobalStyle`\n  body {\n    -webkit-tap-highlight-color: ${theme`colors.gray.100`};\n    ${tw`tw-antialiased`}\n  }\n  \n`\n\nconst GlobalStyles = () => (\n  <>\n    <BaseStyles />\n    <CustomStyles />\n  </>\n)\n\nexport default GlobalStyles","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './pages/index';\nimport GlobalStyles from './assets/GlobalStyles'\n\nimport \"./assets/css/tailwind.css\"\n\nReactDOM.render(\n  <React.StrictMode>\n    <GlobalStyles />\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}